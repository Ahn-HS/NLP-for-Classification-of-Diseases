# Natural Language Processing for extraction medical information and Chatbot system based EMR

의료데이터 기반 자연어 처리 기술 연구/개발 프로젝트

## 개발 목표

- 과거 다년 간의 정신건강의학과 내원자가 호소하는 증상 데이터를 자연어 처리 기반으로 질환명을 분류할 수 있는 모델 개발 

- 질환명 분류 모델의 성능 검증과 개선을 위하여 의학 분야 한국어 개체명 인식기 연구개발 및 일련의 시스템 구축


## 서론 (자연어 처리의 발전과 의학 분야 접목)

각 분야의 대표적인 예로 소비자 특징 및 감성 분석, 유사 문서 검색 및 추천 시스템, 질의 응답, 
자동 번역 등이 활발하게 발전되고 있고, 이러한 기술을 자연어 처리라 통칭하고 있다. 

과거 전통적인 통계 기법과 머신러닝 기반 기술들이 주류였다면 
최근에는 딥러닝 기반 기술들이 발전하게 됨에 따라 자연어 처리 분야에서도 
성능이 증대되어 인간의 언어를 보다 정확하게 이해하여 한계를 뛰어넘는 수준까지 진행되고 있다.

특히 의료 분야에서 비교적 어려운 기술에 속하는 텍스트 기반 자연어 처리 기술들의 접목으로
국외에서는 환자가 호소하는 증상을 의학적, 언어적 요소만으로 예후를 측정할 수 있고, 
실제 인간보다 더 나은 결과를 제시한 연구들이 발표되고 있다.

하지만 국내에서는 이러한 관련 연구가 아직 시도조차 되고 있지 않는 실정이다.

(생략..)


## 개발 내용

의료 데이터에서 언어적인 요소(주관적인 호소 증상)는 환자의 상태를 정량적인 수치로 얻기 어렵기 때문에 
대량의 과거 데이터 분석을 통해서 의미를 추출하는 것이 중요하다.

국내 최초로 과거 10년 간의 전자의무기록(EMR) 의료 데이터를 기반으로 나이, 성별, 진료 년도, 위험군/비위험군, 질병코드
별 각각을 구분할 수 있는 특징을 추출해보고자 하였다.

1) 의료진이 실제 임상적인 의미의 증상 또는 키워드를 선정
2) 오직 기술적으로 추출할 수 있는 키워드를 선정

위 2) 항목을 추출하기 위해서 형태소 분리와 정규화 전처리 과정을 거쳐 
TF-IDF, 다빈도 단어에 대한 PMI, 연관규칙 분석, Textrank 기법을 진행하였다.

이와 같이 과거 전통적인 기법으로 1),2) 과의 단일 중요 핵심 키워드를 추출하였고, 
최신 기술인 텍스트를 실수의 벡터 좌표로 표현하여 각 단어의 유사도, 군집화 계산을 가능하게 하는 워드 임베딩 기법을 도입하였다. 

따라서 위의 기술들로 다음과 같은 특징을 알 수 있었고, 그래서 내원자의 특징을 통해서 정신 질환 환자를 분류할 수 있었다.
- 질환이 있는 환자는 자주 동시에 호소하는 증상이 있을 것이다.
- 질환이 있는 환자는 특정 사례를 가지고 있을 것이다.
- 각각의 연도/성별/나이에 따라서 군집화 요소를 가지고 있을 것이다.


실제 사용으로 모델의 평가와 개선을 지속적으로 하여 증상을 분류해 보고자 의학 정보 개체명 인식 기술을 연구하였다.

(생략..)

## 결론

평가용 데이터에 한해서 질환 분류 accuracy 는 평균 75% 이상의 성능을 보였다.

데이터를 분석할 때에는 연구자의 통찰이 중요하지만 
특히 의학적 정보라는 것이 윤리 문제로 제한적일 뿐만 아니라 
정신건강의학의 특성상 질병 유무를 판가름 할 수 있는 명확한 수치가 없고, 
전문가의 지식이 필수적이므로 데이터에 기반한 결과가 논리적인 설명이 어려웠기에 
이를 실제 적용까지 가는데에 있어서 많은 어려움이 있었다.

하지만 윤리적인 문제를 제외한 실제 로컬에서는 내원자의 언어적인 요소 외에도 분석에 도움될 여러 비언어적 요소 있지만 본 연구에서는 
언어적인 정보만을 기반하여 분류 모델을 설정하였기 때문에 이후의 성능 향상에 많은 가능성이 있다고 본다.

이러한 가능성을 위해서는 실제 진료실에서 내원자들의 목소리 음성, 표정 영상 등의 정보를 얻을 수 있도록 윤리적인 문제 해결이 필요하다고 생각한다.

## 사용 기술
1. 분석
- TF-IDF, TextRank, visualization
2. 워드 임베딩
- word2vec, elmo, bert
3. 분류
- CNN, Linear Regression
4. 군집화
- LDA
5. 개체명 인식
- bi_lstm

## 데이터

- 총 35,722 명 내원자 진료 기록 데이터(EMR)


## 레퍼런스
한국어 위키 백과 데이터 셋 : 
```
https://dumps.wikimedia.org/kowiki/latest/kowiki-latest-pages-articles.xml.bz2

```




